@using System.Globalization
@namespace Masa.Stack.Components.Layouts
@inject GlobalConfig GlobalConfig
@inject I18n I18n

<MMenu OffsetY Bottom>
    <ActivatorContent>
        <MButton Icon Class="emphasis2--text mr-6" @attributes="@context.Attrs">
            <MIcon Size="20">
                mdi-google-translate
            </MIcon>
        </MButton>
    </ActivatorContent>
    <ChildContent>
        <MList Class="py-0">
            <MListItemGroup ActiveClass="primary" Value="GlobalConfig.Language">
                @* @foreach (var culture in I18n.GetCultures()) *@
                @* { *@
                @*     <MListItem OnClick="() => OnLanguageChange(culture.Name)" Value="(StringNumber)culture.Name"> *@
                @*         <ItemContent> *@
                @*             <MListItemContent> *@
                @*                 <span Class="@(context.Active ? "white--text" : "default-lighten-4--text") btn"> *@
                @*                     @culture.NativeName *@
                @*                 </span> *@
                @*             </MListItemContent> *@
                @*         </ItemContent> *@
                @*     </MListItem> *@
                @* } *@
            </MListItemGroup>
        </MList>
    </ChildContent>
</MMenu>

@code {

    void OnLanguageChange(string language)
    {
        I18n.SetCulture(language);
        GlobalConfig.Language = language;
    }

}
