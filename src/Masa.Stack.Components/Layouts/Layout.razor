@using Masa.Stack.Components.Layouts
@using Microsoft.Extensions.Logging
@namespace Masa.Stack.Components
@implements IDisposable
@inject GlobalConfig GlobalConfig
@inject NavigationManager NavigationManager
@inject IAuthClient authClient
@inject ILogger<Layout> logger

<MApp Class="masa masa-stack-components">
    <MAppBar App
             Class="mx-6"
             Elevation="0"
             Height="96">
        <GlobalNavigation OnFavoriteAdd="async (code)=>{await authClient.PermissionService.AddFavoriteMenuAsync(Guid.Parse(code));}"
                    OnFavoriteRemove="async (code)=>{await authClient.PermissionService.RemoveFavoriteMenuAsync(Guid.Parse(code));}">
            <ActivatorContent>
                <MButton Icon Class="white mr-6 emphasis2--text" @attributes="@context.Attrs">
                    <MIcon>mdi-view-dashboard</MIcon>
                </MButton>
            </ActivatorContent>
        </GlobalNavigation>
        <SearchMenu />
        <MSpacer />
        <Favorites FlattenedNavs="FlattenedNavs" />
        <Languages />
        <MSheet class="d-flex align-center justify-space-between rounded-6 pa-1 mr-n3" Width="100">
            <Notification />
            <User UserCenterUrl="@UserCenterRoute" />
        </MSheet>
    </MAppBar>

    <Navigation Items="NavItems"
                Logo="@Logo"
                MiniLogo="@MiniLogo" />

    <MMain>
        <div class="px-6 max-width">
            @ChildContent
        </div>
    </MMain>
</MApp>
