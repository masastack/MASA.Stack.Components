@using Masa.Stack.Components.IntegrationComponents.DateTimes
@namespace Masa.Stack.Components
@typeparam TValue

<MMenu @bind-Value="_menuValue"
       CloseOnContentClick="false"
       MinWidth="@("auto")"
       OffsetY>
    <ActivatorContent>
        @{
            var attrs = context.Attrs
                .Concat(Attributes)
                .ToDictionary(kv => kv.Key, kv => kv.Value);
        }

        <MTextField Dense="Dense"
                    Disabled="Disabled"
                    HideDetails="@HideDetails"
                    Label="@Label"
                    Outlined="@Outlined"
                    PrependIcon="@PrependIcon"
                    PrependInnerIcon="@PrependInnerIcon"
                    Readonly
                    Value="@TextFieldValue"
                    Clearable="Clearable"
                    OnClearClick="HandleOnClearClick"
                    OnKeyDown="OnKeyDown"
                    @attributes="@attrs">
        </MTextField>
    </ActivatorContent>
    <ChildContent>
        <DateTimePicker @bind-Value="DisplayValue"
                        NoTitle="NoTitle">
            <MButton Text Color="primary" OnClick="OnNow">此刻</MButton>
            <MSpacer></MSpacer>
            <MButton Text OnClick="HandleOnCancel">取消</MButton>
            <MButton Text Color="primary" OnClick="HandleOnOk">确认</MButton>
        </DateTimePicker>
    </ChildContent>
</MMenu>